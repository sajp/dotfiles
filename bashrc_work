
function congenica_env () {
    export PERL5LIB=/software/congenica/packages/Perl5/lib/lib/perl5:/software/congenica/packages/Perl5/lib/lib/perl5/x86_64-linux-gnu-thread-multi
    export PATH=/software/congenica/packages/bpipe-0.9.8.7/bin:~/workspace/processing-utils/sapientia-task/bin:$PATH
    export MAX_JAVA_MEM=1024m

    dancer_env "$1"
}

function dancer_env () {
    export DANCER_ENVIRONMENT=${1:-development}
    export DANCER_APPDIR=/software/congenica/packages/sapientia-web/

    if [ ! -f "${DANCER_APPDIR}environments/${DANCER_ENVIRONMENT}.yml" ]; then
        echo "Error: Dancer environment ${DANCER_APPDIR}environments/${DANCER_ENVIRONMENT}.yml doesn't exist"
        unset DANCER_APPDIR
        unset DANCER_ENVIRONMENT
        return
    fi

    echo "DANCER_APPDIR: $DANCER_APPDIR"
    echo "DANCER_ENVIRONMENT: $DANCER_ENVIRONMENT"
}

dancer_db_ver ()
{
    if [ -z $DANCER_ENVIRONMENT ]; then
        return;
    fi;
    echo ' ['$DANCER_ENVIRONMENT']'
}

function revcom () {
    if [ -z $1 ]; then
        echo 'You must provide a sequence (or sequences)';
    fi

    perl -MBio::Perl -we 'print $_ . " -> " . revcom($_)->seq . "\n" for @ARGV;' "$@"
}
